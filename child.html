<html>
<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.2/vue.js"></script>
    <title>child</title>
</head>
<body>

<div id="root">
    child
    <button @click="customStart">call parent:customStart</button>
    <br>
    <button @click="customParticipate">call parent:customParticipate</button>
    <br>
    <button @click="customEnd">call parent:customEnd</button>
    parent information:{{participationData}}
</div>

    
<script>

    let messageTypes = Object.freeze({
        ORCHEXTRA_PROMOTOOL_START: 'orchextraPromotoolStart',
        ORCHEXTRA_PROMOTOOL_PARTICIPATE: 'orchextraPromotoolParticipate',
        ORCHEXTRA_PROMOTOOL_END: 'orchextraPromotoolEnd',
    })

    new Vue({
        el:'#root',
        data:{
            participationData: null
        },
        methods:{
            customStart(){
                window.top.postMessage({type: messageTypes.ORCHEXTRA_PROMOTOOL_START},'*')
            },
            customParticipate(){
                window.top.postMessage({type: messageTypes.ORCHEXTRA_PROMOTOOL_PARTICIPATE},'*')
            },
            customEnd(){
                window.top.postMessage({type: messageTypes.ORCHEXTRA_PROMOTOOL_END},'*')
            }
        },
        created(){
            window.onmessage = (e) => {
                switch (e.data.type) {
                    case 'orchextraPromotoolParticipation':
                        this.participationData = e.data.data;
                        break
                }
            }
        }
    })

</script>
</body>
</html>